<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Catálogo de Produtos - UBADESKLIMP</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        :root {
            --cor-primaria: #1e40af;
            --cor-secundaria: #1d4ed8;
        }
        body {
            font-family: 'Segoe UI', sans-serif;
        }
        .produto-card {
            transition: all 0.3s ease;
        }
        .produto-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        .categoria-btn.active {
            background-color: var(--cor-primaria);
            color: white;
        }
        .modal {
            transition: opacity 0.3s ease;
        }
        .spec-grid {
            display: grid;
            grid-template-columns: max-content 1fr;
            gap: 0.75rem;
        }
         /* Estilo de foco customizado para acessibilidade via teclado */
        :focus-visible {
            outline: 3px solid var(--cor-secundaria);
            outline-offset: 2px;
            border-radius: 4px;
        }
    </style>
</head>
<body class="bg-gray-50 flex flex-col min-h-screen">
    <header class="bg-blue-800 shadow-lg sticky top-0 z-40 text-white">
        <div class="container mx-auto px-4 py-3">
            <div class="flex flex-wrap justify-center sm:justify-between items-center gap-4">
                <a href="/" class="flex items-center transition hover:opacity-90">
                    <div class="bg-white p-1 rounded-md shadow-sm mr-4 flex-shrink-0">
                        <img src="logo_ubadesk.png" alt="UBADESKLIMP - Voltar para a página inicial" class="h-16">
                    </div>
                    <div>
                        <h1 class="text-3xl font-bold text-white">UBADESKLIMP</h1>
                        <p class="text-md text-blue-200 -mt-1">Te Atendendo Desde 1999</p>
                    </div>
                </a>
                <div class="flex items-center space-x-2">
                    <button onclick="abrirBusca()" class="p-3 rounded-full hover:bg-blue-700 transition">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                        </svg>
                    </button>
                    <button onclick="abrirContato()" class="bg-green-500 hover:bg-green-600 text-white px-5 py-2 rounded-lg font-semibold transition shadow-md hover:shadow-lg">
                        Contato
                    </button>
                </div>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-4 py-8 flex-grow relative">
        <div id="busca-modal" class="modal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50 p-4">
            <div class="bg-white p-8 rounded-lg w-11/12 max-w-md">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-xl font-bold">Buscar Produto</h2>
                    <button onclick="fecharBusca()" class="text-gray-500 hover:text-gray-700 text-2xl font-bold">&times;</button>
                </div>
                <input type="text" id="campo-busca" placeholder="Digite o nome do produto..." class="w-full p-3 border border-gray-300 rounded-lg">
                <button onclick="realizarBusca()" class="mt-4 w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700">Buscar</button>
            </div>
        </div>

        <section class="mb-12 text-center bg-blue-50 py-10 rounded-lg">
            <h2 class="text-3xl font-bold text-blue-800 mb-4">Produtos Profissionais de Limpeza</h2>
            <p class="text-xl font-semibold text-blue-700 max-w-3xl mx-auto">Soluções Completas para Limpeza Residencial e Comercial em Ubatuba</p>
        </section>

        <div class="flex flex-col md:flex-row gap-8">
            <aside class="w-full md:w-64">
                <div class="bg-white p-6 rounded-lg shadow-sm sticky top-4">
                    <h3 class="font-bold text-lg mb-4">Categorias</h3>
                    <div id="botoes-categoria" class="space-y-2">
                        <button onclick="filtrarProdutos('todos')" class="categoria-btn active w-full text-left px-3 py-2 rounded hover:bg-gray-100">Todos os Produtos</button>
                        <button onclick="filtrarProdutos('destaques')" class="categoria-btn w-full text-left px-3 py-2 rounded hover:bg-gray-100">Destaques</button>
                        <button onclick="filtrarProdutos('novidades')" class="categoria-btn w-full text-left px-3 py-2 rounded hover:bg-gray-100">Novidades</button>
                        <button onclick="filtrarProdutos('promocoes')" class="categoria-btn w-full text-left px-3 py-2 rounded hover:bg-gray-100">Promoções</button>
                    </div>
                </div>
            </aside>

            <div class="flex-1">
                <div id="grade-produtos" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                </div>
            </div>
        </div>
    </main>

    <div id="detalhes-modal" class="modal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50 p-4">
        <div class="bg-white rounded-lg w-full max-w-4xl max-h-[90vh] flex flex-col">
            <div class="p-6 border-b flex-shrink-0">
                <div class="flex justify-between items-center">
                    <h2 class="text-2xl font-bold" id="detalhes-titulo">Detalhes do Produto</h2>
                    <button onclick="fecharDetalhes()" class="text-gray-500 hover:text-gray-700 text-3xl font-bold">&times;</button>
                </div>
            </div>
            <div class="p-6 overflow-y-auto min-h-0">
                <div class="flex flex-col md:flex-row gap-8">
                    <div class="md:w-1/2">
                        <img src="" alt="Imagem detalhada do produto" class="w-full h-auto object-contain rounded-lg" id="detalhes-imagem">
                    </div>
                    <div class="md:w-1/2">
                        <h3 class="text-xl font-semibold mb-2" id="detalhes-nome"></h3>
                        <p class="text-gray-700 mb-6" id="detalhes-descricao"></p>
                        <div class="mb-6">
                            <h4 class="font-semibold mb-2">Especificações:</h4>
                            <ul id="detalhes-specs" class="text-gray-600">
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="p-6 border-t flex-shrink-0">
                <div class="flex items-center justify-between">
                    <div>
                        <span class="text-gray-400 line-through mr-2 text-lg hidden" id="detalhes-preco-antigo"></span>
                        <span class="text-3xl font-bold text-gray-900" id="detalhes-preco"></span>
                    </div>
                    <button class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-bold">Comprar Agora</button>
                </div>
            </div>
        </div>
    </div>

    <div id="contato-modal" class="modal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50 p-4">
        <div class="bg-white p-8 rounded-lg w-11/12 max-w-md">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-blue-800">Contato UBADESKLIMP</h2>
                <button onclick="fecharContato()" class="text-gray-500 hover:text-gray-700 text-3xl font-bold">&times;</button>
            </div>
            <div class="mb-4 text-sm text-gray-600">
                <p><strong>Endereço:</strong> Av Rio grande do Sul, 259</p>
                <p><strong>Telefone:</strong> (12) 3832-4474</p>
                <p><strong>WhatsApp:</strong> (12) 3833-2434</p>
                <p><strong>Email:</strong> Ubadesk.pedidos@gmail.com</p>
                <p><strong>Instagram:</strong> @Ubadesklimp</p>
            </div>
            <form action="https://formspree.io/f/mdkdpvzo" method="POST" class="space-y-4">
                <div>
                    <label for="nome" class="block text-sm font-medium text-gray-700 mb-1">Nome</label>
                    <input type="text" name="nome" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                </div>
                <div>
                    <label for="email" class="block text-sm font-medium text-gray-700 mb-1">E-mail</label>
                    <input type="email" name="email" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                </div>
                <div>
                    <label for="Telefone" class="block text-sm font-medium text-gray-700 mb-1">Telefone</label>
                    <input type="tel" name="Telefone" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                </div>
                <div>
                    <label for="mensagem" class="block text-sm font-medium text-gray-700 mb-1">Mensagem</label>
                    <textarea name="mensagem" rows="4" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" required></textarea>
                </div>
                <a href="https://wa.link/7bt2ax" target="_blank" rel="noopener noreferrer" class="w-full flex items-center justify-center gap-2 bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg">
                    <i class="fab fa-whatsapp fa-lg"></i>
                    <span>Conversar no WhatsApp</span>
                </a>
                <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg">Enviar Mensagem por E-mail</button>
            </form>
        </div>
    </div>

    <footer class="bg-gray-800 text-white mt-12 py-8 relative z-0">
        <div class="container mx-auto px-4 text-center">
            <p class="font-bold text-lg">UBADESKLIMP COML. DISTRIBUIDORA LTDA</p>
            <p class="text-sm text-gray-400">Av Rio grande do Sul, 259 - Ubatuba, SP</p>
            <p class="text-sm text-gray-400 mt-1">CNPJ: 03.303.968/0001-17</p>
            <div class="mt-4">
                <p class="text-xs">&copy; 2025 UBADESKLIMP. Todos os direitos reservados.</p>
            </div>
        </div>
    </footer>

    <script>
        let todosOsProdutos = [];

        async function carregarProdutos() {
            try {
                const response = await fetch('produtos.json');
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const data = await response.json();
                todosOsProdutos = data.produtos;
                renderizarProdutos(todosOsProdutos);
            } catch (error)
 {
                console.error("Não foi possível carregar os produtos:", error);
                document.getElementById('grade-produtos').innerHTML = '<p class="text-red-500">Erro ao carregar produtos. Verifique o console para mais detalhes.</p>';
            }
        }

        function renderizarProdutos(listaDeProdutos) {
            const grade = document.getElementById('grade-produtos');
            if (!listaDeProdutos || listaDeProdutos.length === 0) {
                grade.innerHTML = '<p class="text-gray-500 col-span-full text-center">Nenhum produto encontrado.</p>';
                return;
            }
            const cardsHTML = listaDeProdutos.map(produto => {
                let precoHTML = `<span class="font-bold text-gray-900 text-lg">R$ ${produto.preco}</span>`;
                if (produto.precoAntigo) {
                    precoHTML = `
                        <div>
                            <span class="text-gray-400 text-sm line-through mr-2">R$ ${produto.precoAntigo}</span>
                            <span class="font-bold text-red-600 text-lg">R$ ${produto.preco}</span>
                        </div>
                    `;
                }
                let tagHTML = '';
                if (produto.categoria.includes('novidades')) {
                    tagHTML = '<span class="absolute top-2 left-2 bg-yellow-500 text-white text-xs px-2 py-1 rounded">Novidade</span>';
                } else if (produto.categoria.includes('promocoes')) {
                    tagHTML = '<span class="absolute top-2 left-2 bg-red-500 text-white text-xs px-2 py-1 rounded">Promoção</span>';
                } else if (produto.categoria.includes('destaques')) {
                    tagHTML = '<span class="absolute top-2 right-2 bg-green-500 text-white text-xs px-2 py-1 rounded">Mais Vendido</span>';
                }
                return `
                    <div class="produto-card bg-white rounded-lg overflow-hidden shadow-md flex flex-col">
                        <div class="relative h-48 flex items-center justify-center p-4 bg-white">
                            <img src="${produto.imagemCard}" alt="Imagem de ${produto.nome}" class="max-h-full max-w-full object-contain">
                            ${tagHTML}
                        </div>
                        <div class="p-4 flex flex-col justify-between flex-grow">
                            <div>
                                <h3 class="font-bold text-base sm:text-lg mb-2">${produto.nome}</h3>
                                <p class="text-gray-600 text-xs sm:text-sm mb-4">${produto.descricaoBreve}</p>
                            </div>
                            <div class="flex justify-between items-center mt-4">
                                ${precoHTML}
                                <button onclick="abrirDetalhes(${produto.id})" class="bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm">Detalhes</button>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
            grade.innerHTML = cardsHTML;
        }

        function abrirBusca() {
            document.body.classList.add('overflow-hidden');
            document.getElementById('busca-modal').classList.remove('hidden');
        }
        function fecharBusca() {
            document.body.classList.remove('overflow-hidden');
            document.getElementById('busca-modal').classList.add('hidden');
        }
        function abrirContato() {
            document.body.classList.add('overflow-hidden');
            document.getElementById('contato-modal').classList.remove('hidden');
        }
        function fecharContato() {
            document.body.classList.remove('overflow-hidden');
            document.getElementById('contato-modal').classList.add('hidden');
        }
        function abrirDetalhes(idProduto) {
            document.body.classList.add('overflow-hidden');
            const produto = todosOsProdutos.find(p => p.id === idProduto);
            if (!produto) return;
            document.getElementById('detalhes-titulo').textContent = produto.nome;
            document.getElementById('detalhes-nome').textContent = produto.nome;
            document.getElementById('detalhes-descricao').textContent = produto.descricaoCompleta;
            document.getElementById('detalhes-imagem').src = produto.imagemDetalhe;
            document.getElementById('detalhes-imagem').alt = `Imagem detalhada de ${produto.nome}`;
            document.getElementById('detalhes-preco').textContent = `R$ ${produto.preco}`;
            const precoAntigoEl = document.getElementById('detalhes-preco-antigo');
            if (produto.precoAntigo) {
                precoAntigoEl.textContent = `R$ ${produto.precoAntigo}`;
                precoAntigoEl.classList.remove('hidden');
            } else {
                precoAntigoEl.classList.add('hidden');
            }
            const specsList = document.getElementById('detalhes-specs');
            specsList.innerHTML = '';
            specsList.className = 'space-y-2';
            for(const [key, value] of Object.entries(produto.specs)) {
                if(value){
                    const li = document.createElement('li');
                    li.className = 'spec-grid';
                    li.innerHTML = `<span class="font-medium text-gray-800 capitalize">${key.replace('_', ' ')}:</span><span class="text-gray-600">${value}</span>`;
                    specsList.appendChild(li);
                }
            }
            document.getElementById('detalhes-modal').classList.remove('hidden');
        }
        function fecharDetalhes() {
            document.body.classList.remove('overflow-hidden');
            document.getElementById('detalhes-modal').classList.add('hidden');
        }

        function filtrarProdutos(categoria) {
            document.querySelectorAll('.categoria-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            let produtosParaMostrar;
            if (categoria === 'todos') {
                produtosParaMostrar = todosOsProdutos;
            } else {
                produtosParaMostrar = todosOsProdutos.filter(produto => 
                    produto.categoria.includes(categoria)
                );
            }
            renderizarProdutos(produtosParaMostrar);
        }
        
        function realizarBusca() {
            const termoBusca = document.getElementById('campo-busca').value.toLowerCase();
            const produtosFiltrados = todosOsProdutos.filter(produto => 
                produto.nome.toLowerCase().includes(termoBusca)
            );
            renderizarProdutos(produtosFiltrados);
            fecharBusca();
        }

        document.addEventListener('DOMContentLoaded', carregarProdutos);

        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                fecharBusca();
                fecharContato();
                fecharDetalhes();
            }
        });
    </script>

    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>

</body>
</html>